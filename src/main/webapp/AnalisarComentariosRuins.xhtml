<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"   
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="./dataMyFace.xhtml">

    <ui:define name="content">
        <div class="container-fluid">

            <!-- Page Heading -->           
            <div class="row">
                <div class="col-lg-12">
                    <ol class="breadcrumb">
                        <li>
                            <i class="fa fa-dashboard"></i>  <a href="home.xhtml">Home</a>
                        </li>
                        <li class="active">
                            <i class="fa fa-edit"></i> Comentários negativos
                        </li>
                    </ol>
                    <h1 class="page-header" align="center">                        
                        <a href="home.xhtml"><img src="resources/imagens/datamy.png"/></a><br/>
                        Comentários do Facebook
                    </h1>

                </div>
            </div>
            <!-- /.row -->
            <!--
            End Migalhas de pão e títulos e subtitulos
            ========================== -->

            <!--
            Painel
            ========================== -->
            <div class="col-lg-10 col-lg-offset-2">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title"><i class="fa fa-facebook-square"></i> Comentarios  do Facebook</h3>
                        </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                        <tr>
                                            <th>Mensagem do post</th>
                                            <th>Reações</th>
                                            <th>Publicado por</th>                                                                                      
                                            <th>Contador de comentarios</th>
                                            <th>Mensagem do cliente</th>
                                        </tr>
                                    </thead>
                                    <tbody>                                        
                                        <ui:repeat value="#{comentario.listarComentariosRuins()}" var="coment" rendered="true">                                            
                                            <tr>
                                                <td><h:outputText value="#{coment.postMessage}" /></td>
                                                <td><h:outputText value="#{coment.postLikesCount}" /></td>
                                                <td><h:outputText value="#{coment.postFromName}" /></td>                                                
                                                <td><h:outputText value="#{coment.postCommentsCount}" /></td>
                                                <td><h:outputText value="#{coment.commentsMessage}" /></td> 
                                                <td><h:inputHidden value="token" /></td>    
                                                <td>
                                                    <h:form>
                                                        <a class="btn colect-data-btn" data-popup-open="popup-#{coment.commentsId}" href="#">Responder</a>

                                                        <div class="popup" data-popup="popup-#{coment.commentsId}">
                                                            <div class="popup-inner">                                                                                                                                
                                                                <h2>Responder ao comentario de <h:outputText value="#{coment.commentsFromName}"/></h2>
                                                                <br/>
                                                                <h5>Comentario: <h:outputText value="#{coment.commentsMessage}"/></h5>
                                                                <br/>

                                                                <p>
                                                                    <h5>Selecionar resposta</h5>                                                                    
                                                                    <h:selectOneRadio value="#{resposta.resposta.id}">
                                                                        <f:selectItems value="#{resposta.select()}" var="c"
                                                                                       itemLabel="#{c.textoResposta}" itemValue="#{c.id}" />
                                                                    </h:selectOneRadio>
                                                                    <h:inputText class="form-control" value="#{resposta.resposta.textoResposta}"/>
                                                                    <p class="help-block">Resposta personalizada</p>
                                                                </p>
                                                                <p><h:commandButton class="btn colect-data-btn" value="Publicar" action="#{comentario.responderComentario(resposta.resposta.textoResposta, coment , coment.commentsId, coment.commentsFromName, coment.commentsMessage, resposta.resposta.id, Ruins)}"></h:commandButton>
                                                                    <h:commandButton class="btn colect-data-btn" value="Marcar como visto" action="#{comentario.marcarVisto(coment, Ruins)}"></h:commandButton></p>
                                                                <p><a target="blank" href="https://www.facebook.com/pizzadacasadelivery/posts/#{coment.postIdFormatado}"><h4 align="right">Ir para a publicação</h4></a></p>
                                                                <a class="popup-close" data-popup-close="popup-#{coment.commentsId}" href="#">x</a>
                                                            </div>
                                                        </div>                                                        
                                                    </h:form>
                                                </td>
                                            </tr>

                                        </ui:repeat>                                               
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--
            End Painel
            ========================== -->

        </div>
        <!-- /.container-fluid -->
    </ui:define>

</ui:composition>
